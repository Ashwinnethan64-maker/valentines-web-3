/* Variables & Reset */
:root {
    --color-bg-start: #200020;
    --color-bg-end: #000000;
    --color-primary: #C71585;
    /* MediumVioletRed */
    --color-accent: #FFD700;
    /* Gold */
    --color-text: #FFF0F5;
    /* LavenderBlush */

    --font-title: 'Great Vibes', cursive;
    --font-script: 'Sacramento', cursive;
    --font-body: 'Cinzel', serif;

    --ease-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-tap-highlight-color: transparent;
}

body {
    background: radial-gradient(circle at center, var(--color-bg-start), var(--color-bg-end));
    color: var(--color-text);
    font-family: var(--font-body);
    overflow: hidden;
    /* Canvas handles background */
    height: 100vh;
    width: 100vw;
}

/* Canvas Background */
#bg-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    pointer-events: all;
    /* Allow mouse interaction for constellation */
}

/* UI Layer */
#app {
    position: relative;
    z-index: 10;
    height: 100%;
    width: 100%;
    display: flex;
    flex-direction: column;
    pointer-events: none;
    /* Let clicks pass to canvas where no UI */
}

/* Header */
.app-header {
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    pointer-events: auto;
}

.logo {
    font-family: var(--font-title);
    font-size: 2rem;
    color: var(--color-primary);
    text-shadow: 0 0 10px rgba(199, 21, 133, 0.5);
}

#music-toggle {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    color: #fff;
    cursor: pointer;
    transition: all 0.3s ease;
}

#music-toggle:hover {
    background: rgba(255, 255, 255, 0.1);
}

/* Views & Routing */
#view-container {
    flex: 1;
    position: relative;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    pointer-events: auto;
}

.view {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.5s ease, transform 0.5s ease;
    transform: translateY(20px);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    overflow-y: auto;
    /* Allow scrolling content */
}

.view.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

/* Glassmorphism Cards */
.glass-card {
    background: rgba(20, 0, 20, 0.6);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
}

/* Hero Section */
.hero-content {
    text-align: center;
}

.heart-pulse-container {
    width: 150px;
    margin: 0 auto 2rem;
    animation: heartBeat 1.5s infinite;
}

.heart-svg {
    fill: var(--color-primary);
    filter: drop-shadow(0 0 15px var(--color-primary));
}

.title-text {
    font-family: var(--font-title);
    font-size: 4rem;
    margin-top: 1rem;
    background: linear-gradient(45deg, #fff, var(--color-primary));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
}

.subtitle {
    font-size: 1.2rem;
    margin-bottom: 3rem;
    opacity: 0.8;
}

/* Customizer */
.customizer-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    width: 100%;
    margin-bottom: 2rem;
}

.drop-zone {
    border: 2px dashed rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    padding: 2rem;
    text-align: center;
    cursor: pointer;
    transition: border-color 0.3s;
    min-height: 150px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
}

.drop-zone:hover {
    border-color: var(--color-primary);
}

.drop-zone img {
    max-width: 100%;
    max-height: 200px;
    object-fit: contain;
}

.hidden {
    display: none !important;
}

textarea,
input[type="text"],
select {
    width: 100%;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    padding: 0.8rem;
    color: #fff;
    font-family: inherit;
    margin-top: 0.5rem;
}

textarea:focus,
input:focus {
    outline: none;
    border-color: var(--color-primary);
}

/* Buttons */
.btn-primary {
    background: var(--color-primary);
    color: white;
    padding: 1rem 2.5rem;
    border-radius: 50px;
    text-decoration: none;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: transform 0.2s, box-shadow 0.2s;
    display: inline-block;
    border: none;
    cursor: pointer;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(199, 21, 133, 0.4);
}

.btn-secondary {
    background: transparent;
    border: 1px solid white;
    color: white;
    padding: 0.8rem 2rem;
    border-radius: 50px;
    text-decoration: none;
    display: inline-block;
    cursor: pointer;
    margin: 0 0.5rem;
}

.btn-secondary:hover {
    background: rgba(255, 255, 255, 0.1);
}

/* Effects */
.ripple {
    position: relative;
    overflow: hidden;
}

@keyframes heartBeat {
    0% {
        transform: scale(1);
    }

    14% {
        transform: scale(1.1);
    }

    28% {
        transform: scale(1);
    }

    42% {
        transform: scale(1.1);
    }

    70% {
        transform: scale(1);
    }
}

/* Gooey Heart Fusion */
.fusion-container {
    width: 200px;
    /* Larger container for fusion */
    height: 200px;
    position: relative;
    /* filter: url('#goo');  <-- This enables the gooey effect */
    /* Note: filter url reference sometimes needs absolute path or inline SVG in some browsers, 
       but usually works if SVG is in BOM. We'll leave it simple for now. 
       Actually, to make it work reliably cross-browser, we need the container to have the filter. */
    filter: url('#goo');
    display: flex;
    justify-content: center;
    align-items: center;
}

.fuse-circle {
    position: absolute;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: var(--color-primary);
    opacity: 1;
    animation: fuse-move 6s ease-in-out infinite;
}

.fuse-circle.c1 {
    animation-delay: 0s;
    left: 40px;
}

.fuse-circle.c2 {
    animation-delay: 0s;
    right: 40px;
    background: #FF1493;
    /* DeepPink */
}

.main-heart {
    position: absolute;
    width: 100px;
    height: 100px;
    fill: var(--color-primary);
    z-index: 10;
    animation: heart-pulse-shadow 2s infinite;
}

@keyframes fuse-move {

    0%,
    100% {
        transform: translateX(0) scale(1);
        opacity: 1;
    }

    50% {
        transform: translateX(0) scale(0.5);
        opacity: 0;
    }

    /* Disappear into center */
}

@keyframes heart-pulse-shadow {
    0% {
        transform: scale(1);
        filter: drop-shadow(0 0 0 transparent);
    }

    50% {
        transform: scale(1.1);
        filter: drop-shadow(0 0 20px var(--color-primary));
    }

    100% {
        transform: scale(1);
        filter: drop-shadow(0 0 0 transparent);
    }
}

/* Scrollbar */
::-webkit-scrollbar {
    width: 6px;
}

::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
}

/* Mobile Adjustments */
@media (max-width: 768px) {
    .title-text {
        font-size: 3rem;
    }

    .customizer-grid {
        grid-template-columns: 1fr;
    }

    .view {
        padding: 1rem;
    }
}

/* Audio Reactive State */
.heartbeat-active .heart-svg {
    animation: none;
    /* JS takes over */
    will-change: transform;
}